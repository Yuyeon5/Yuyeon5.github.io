<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <style>
    container {
      width: 100%;
    }

    sidebar {
      float: left;
      width: 350px;
      margin: 0;
      padding: 1em;
    }

    #canvas {
      background-color: #000;
      margin-left: 300;
      border-left: 1px solid gray;
      padding: 1em;
      overflow: hidden;
    }

    * {
      border-style: none;
      border-width: 0;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      font-family: Helvetica, Arial, sans-serif;
      margin: 0;
      outline: 0;
      overflow: visible;
      padding: 0;
    }

    .flat-radio .flat-radio-btn {
      -webkit-background-clip: content-box;
      background-clip: content-box;
      background-color: #fff;
      border-bottom: 1px solid #c4c4c4;
      border-right: 1px solid #c4c4c4;
      border-top: 1px solid #c4c4c4;
      color: #aaa;
      cursor: pointer;
      float: left;
      font-size: 12px;
      line-height: 23px;
      padding-left: 1px;
      padding-top: 1px;
      text-align: center;
    }

    .flat-radio .flat-radio-btn.first {
      border-left: 1px solid #c4c4c4;
    }
  </style>
</head>

<body>
  <div class="container">
    <sidebar>

      <div class="no-top-padding flat-radio ng-isolate-scope" label="width" model="dimensions.width">
        <!-- ngIf: label -->
        <div class="flat-radio-label ng-binding ng-scope" ng-if="label">폭(W)</div>
        <!-- end ngIf: label -->
        <div class="flat-radio-buttons">
          <!-- ngRepeat: entry in options -->
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(700)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">700</div>
          <div id="Width_1000" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(1000)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">1000</div>
          <div id="Width_1200" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(1200)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">1200</div>
          <div id="Width_1400" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(1400)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">1400</div>
          <div id="Width_1600" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(1600)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">1600</div>
          <div id="Width_1800" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(1800)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">1800</div>
          <div id="Width_2000" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setWidth(2000)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">2000</div>
        </div>
      </div>

      <div class="no-top-padding flat-radio ng-isolate-scope" label="depth" model="dimensions.depth">
        <!-- ngIf: label -->
        <div class="flat-radio-label ng-binding ng-scope" ng-if="label">깊이(D)</div>
        <!-- end ngIf: label -->
        <div class="flat-radio-buttons">
          <!-- ngRepeat: entry in options -->
          <div id="Depth_500" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setDepth(500)" ng-init="buttonWidth = setButtonWidth()" style="width: 20%;">500</div>
          <div id="Depth_600" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setDepth(600)" ng-init="buttonWidth = setButtonWidth()" style="width: 20%;">600</div>
          <div id="Depth_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setDepth(700)" ng-init="buttonWidth = setButtonWidth()" style="width: 20%;">700</div>
          <div id="Depth_800" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setDepth(800)" ng-init="buttonWidth = setButtonWidth()" style="width: 20%;">800</div>
          <div id="Depth_900" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setDepth(900)" ng-init="buttonWidth = setButtonWidth()" style="width: 20%;">900</div>
        </div>
      </div>

      <div class="no-top-padding flat-radio ng-isolate-scope" label="board_color">
        <!-- ngIf: label -->
        <div class="flat-radio-label ng-binding ng-scope" ng-if="label">상판색상</div>
        <!-- end ngIf: label -->
        <div class="flat-radio-buttons">
          <!-- ngRepeat: entry in options -->
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(1)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">화이트</div>
          <div id="Width_1000" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(2)" ng-init="buttonWidth = setButtonWidth()" style="width: 12%;">블랙</div>
          <div id="Width_1200" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(3)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">그레이</div>
          <div id="Width_1400" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(4)" ng-init="buttonWidth = setButtonWidth()" style="width: 14%;">내추럴</div>
          <div id="Width_1600" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(5)" ng-init="buttonWidth = setButtonWidth()" style="width: 12%;">파인</div>
          <div id="Width_1800" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(6)" ng-init="buttonWidth = setButtonWidth()" style="width: 16%;">콘크리트</div>
          <div id="Width_2000" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setBoardColor(7)" ng-init="buttonWidth = setButtonWidth()" style="width: 16%;">레드파인</div>
        </div>
      </div>

      <div class="no-top-padding flat-radio ng-isolate-scope" label="board_color">
        <!-- ngIf: label -->
        <div class="flat-radio-label ng-binding ng-scope" ng-if="label">프레임색상</div>
        <!-- end ngIf: label -->
        <div class="flat-radio-buttons">
          <!-- ngRepeat: entry in options -->
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setFrameColor(1)" ng-init="buttonWidth = setButtonWidth()" style="width: 33%;">화이트</div>
          <div id="Width_1000" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setFrameColor(2)" ng-init="buttonWidth = setButtonWidth()" style="width: 33%;">블랙</div>
          <div id="Width_1200" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setFrameColor(3)" ng-init="buttonWidth = setButtonWidth()" style="width: 33%;">그레이</div>
          
        </div>
      </div>

      <div class="no-top-padding flat-radio ng-isolate-scope" label="board_color">
        <!-- ngIf: label -->
        <div class="flat-radio-label ng-binding ng-scope" ng-if="label">수직부재</div>
        <!-- end ngIf: label -->
        <div class="flat-radio-buttons">
          <!-- ngRepeat: entry in options -->
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setVertical(1)" ng-init="buttonWidth = setButtonWidth()" style="width: 25%;">없음</div>
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setVertical(2)" ng-init="buttonWidth = setButtonWidth()" style="width: 25%;">640</div>
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setVertical(3)" ng-init="buttonWidth = setButtonWidth()" style="width: 25%;">920</div>
          <div id="Width_700" ng-repeat="entry in options" class="flat-radio-btn ng-binding ng-scope first" ng-class="{'first': $first || (options.length > 7 &amp;&amp; $index == 4), 'last': $last, 'active': entry.value == model }"
            ng-style="{'width': buttonWidth};" onclick="setVertical(4)" ng-init="buttonWidth = setButtonWidth()" style="width: 25%;">1860</div>
          
        </div>
      </div>

      
    </sidebar>

    <div id="canvas">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/86/three.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="./TrackballControls.js"></script>

    <script>
      var container;
      var camera, controls, scene, renderer;
      var geometry, material;

      var white_color = 0xf8f9fb;
      var black_color = 0x21201e;
      var gray_color = 0x6f6f6f;

      var texture_natural = new THREE.TextureLoader().load('texture/natural.jpg');
      var texture_pine = new THREE.TextureLoader().load('texture/pine.jpg');
      var texture_concrete = new THREE.TextureLoader().load('texture/concrete.jpg');
      var texture_redpine = new THREE.TextureLoader().load('texture/redpine.jpg');

      texture_natural.minFilter = THREE.LinearFilter;
      texture_pine.minFilter = THREE.LinearFilter;
      texture_concrete.minFilter = THREE.LinearFilter;
      texture_redpine.minFilter = THREE.LinearFilter;

      var board;
      var board_thickness = 30;
      var board_width = 1200;
      var board_depth = 700;
      var board_material = new THREE.MeshStandardMaterial({color: white_color});

      var frame;
      var frame_thickness = 30;
      var frame_length = 650;
      var frame_material = new THREE.MeshStandardMaterial({color: white_color});

      var vertical;
      var vertical_length;
      var vertical_y;

      init();
      animate();

      function init() {
        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);
        camera.position.x = 1000;
        camera.position.y = 500;
        camera.position.z = 3000;

        updateScene(1000);

        // renderer
        renderer = new THREE.WebGLRenderer({ antialias: false });
        renderer.setClearColor(0);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);

        container = document.getElementById('canvas');
        container.appendChild(renderer.domElement);

        controls = new THREE.TrackballControls(camera, renderer.domElement);
        controls.rotateSpeed = 10.0;
        controls.zoomSpeed = 1.2;
        controls.panSpeed = 1.8;
        controls.noZoom = false;
        controls.noPan = false;
        controls.staticMoving = true;
        controls.dynamicDampingFactor = 1.0;

        controls.addEventListener('change', render);

        window.addEventListener('resize', onWindowResize, false);

        render();
      }

      function setWidth(w) {
        board_width = w;
        updateScene();
        render();
      }

      function setDepth(d) {
        board_depth = d;
        updateScene();
        render();
      }

      function getMaterial(color_code) {
        var material;

        switch (color_code) {
          case 1:
            material = new THREE.MeshStandardMaterial({color:white_color});
            return material;
          case 2:
            material = new THREE.MeshStandardMaterial({color:black_color});
            return material;
          case 3:
            material = new THREE.MeshStandardMaterial({color:gray_color});
            return material;
          case 4:
            material = new THREE.MeshStandardMaterial({map:texture_natural});
            return material;
          case 5:
            material = new THREE.MeshStandardMaterial({map:texture_pine});
            return material;
          case 6:
            material = new THREE.MeshStandardMaterial({map:texture_concrete});
            return material;
          case 7:
            material = new THREE.MeshStandardMaterial({map:texture_redpine});
            return material;
          default:
            material = new THREE.MeshStandardMaterial({color:white_color});
            return material;
        }
      }      

      function setBoardColor(c) {
        board_material = getMaterial(c);
        updateScene();
        render();
      }

      function setFrameColor(c) {
        frame_material = getMaterial(c);
        updateScene();
        render();
      }

      function setVertical(c) {
        switch (c) {
          case 1:
            vertical_length = 0;
            break;
          case 2:
            vertical_length = 640;
            vertical_y = -70;
            break;
          case 3:
            vertical_length = 920;
            vertical_y = -150;
            break;
          case 4:
            vertical_length = 1860;
            vertical_y = 350;
            break;
          default:
            vertical_length = 0;
            break;
        }
        updateScene();
        render();
      }

      function updateScene() {
        // world
        scene = new THREE.Scene();

        // board
        geometry = new THREE.BoxBufferGeometry(board_width, board_thickness, board_depth);
        board = new THREE.Mesh(geometry, board_material);
        board.updateMatrix();
        board.matrixAutoUpdate = false;
        scene.add(board);

        // frame (leg)
        geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_length, frame_thickness);
        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = - (board_width - frame_thickness) / 2;
        frame.position.y = - (frame_length + board_thickness) / 2;
        frame.position.z = - (board_depth - frame_thickness) / 2;
        scene.add(frame);

        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = (board_width - frame_thickness) / 2;
        frame.position.y = - (frame_length + board_thickness) / 2;
        frame.position.z = - (board_depth - frame_thickness) / 2;
        scene.add(frame);

        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = - (board_width - frame_thickness) / 2;
        frame.position.y = - (frame_length + board_thickness) / 2;
        frame.position.z = (board_depth - frame_thickness) / 2;
        scene.add(frame);

        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = (board_width - frame_thickness) / 2;
        frame.position.y = - (frame_length + board_thickness) / 2;
        frame.position.z = (board_depth - frame_thickness) / 2;
        scene.add(frame);

        // vertical
        if (vertical_length > 0) {
          geometry = new THREE.BoxBufferGeometry(frame_thickness, vertical_length, frame_thickness);
          vertical = new THREE.Mesh(geometry, frame_material);
          vertical.position.x = - (board_width - frame_thickness) / 2;
          vertical.position.y =  vertical_y;
          vertical.position.z = - (board_depth + frame_thickness + 5) / 2 ;
          scene.add(vertical);

          geometry = new THREE.BoxBufferGeometry(frame_thickness, vertical_length, frame_thickness);
          vertical = new THREE.Mesh(geometry, frame_material);
          vertical.position.x = + (board_width - frame_thickness) / 2;
          vertical.position.y =  vertical_y;
          vertical.position.z = - (board_depth + frame_thickness + 5) / 2 ;
          scene.add(vertical);

          // default shelf
        }

        // light
        var lights = [];
        lights[0] = new THREE.PointLight(0xffffff, 1, 0);
        lights[1] = new THREE.PointLight(0xffffff, 1, 0);
        lights[2] = new THREE.PointLight(0xffffff, 1, 0);
        lights[3] = new THREE.PointLight(0xffffff, 1, 0);
        lights[4] = new THREE.PointLight(0xffffff, 1, 0);

        lights[0].position.set(0, 4000, 0);
        lights[1].position.set(4000, 0, 0);
        lights[2].position.set(-4000, 0, 0);
        lights[3].position.set(0, 0, -4000);
        lights[4].position.set(0, 0, 4000);
        
        scene.add(lights[0]);
        scene.add(lights[1]);
        scene.add(lights[2]);
        scene.add(lights[3]);
        scene.add(lights[4]);
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        controls.handleResize();
        render();
      }
      function animate() {
        requestAnimationFrame(animate);
        controls.update();
      }
      function render() {
        renderer.render(scene, camera);
      }
    </script>
</body>

</html>