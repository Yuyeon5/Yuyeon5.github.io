<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8" name="format-detection" content="telephone=no">
	<!--<meta name="viewport" content="intial-scale=1">-->
	<title>F1DESK CONFIGURATOR</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/js/swiper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css" media="only screen and (max-width:1024px)">
	<script>
		$(document).ready(function(){

			$(".menu_box").click(function(){
				$(".menu_box").removeClass("sel");
				$(this).addClass("sel");

				

			});

			$(".mal_buttons>div").click(function(){

				$(".mal_buttons>div").removeClass("sel");
				$(this).addClass("sel");
				$(".menu_all_list").fadeOut();

				var seltext = $(this).html();
				$(this).parents("div.swiper-slide").find(".menu_sel_text").html(seltext);
				console.log(seltext);
			});

			$(".swiper-button-prev, .swiper-button-next").click(function(){
				$(".menu_all_list").fadeOut();
			});

			var windowWidth = $( window ).width();
			console.log(windowWidth);
			if(windowWidth < 1024) {
			//창 가로 크기가 1024 미만일 경우 
			 // alert("모바일:0433");
			 var swiper = new Swiper('.swiper-container', {
					slidesPerView: 4,
					spaceBetween: 0,
					slidesPerGroup: 4,
					freeMode: true,
					navigation: {
						nextEl: '.swiper-button-next',
						prevEl: '.swiper-button-prev',
					},
				});

				// 버튼 크기 가져오기
				var btnWidth = parseInt($(".swiper-slide").css("width"));
				console.log(btnWidth);
				$(".sidebar, .swiper-slide").css({"height":btnWidth});

				var sideWidth = windowWidth-80;
				// $(".swiper-button-next").css({"left":sideWidth});
				console.log(sideWidth);

				// $(".menu_box, .swiper-button-next, .swiper-button-prev").css({"height":btnWidth*0.5});

				$(".line2").css({"margin-top":"2%"});

				$(".menu_box").click(function(){
					// menu_box 인덱스값 구하기
					var mboxIdx = $(".swiper-slide .menu_box").index(this);

					$(".m_sidebar>.menu_all_list").fadeOut();
					$(".m_sidebar>.menu_all_list:eq(" + mboxIdx + ")").fadeIn();
				});

				$(".mal_buttons>div").click(function(){
					var seltextIdx = $(this).parents(".menu_all_list").index();
					var seltext = $(this).html();
					$(".sidebar .swiper-slide:eq("+ seltextIdx +") .menu_sel_text").html(seltext);
					console.log(seltext);
				});

			} else {

			 //alert("pc");
			 var swiper = new Swiper('.swiper-container', {
					direction: 'vertical',
					slidesPerView: 5,
					spaceBetween: 0,
					slidesPerGroup: 5,
					freeMode: true,
					navigation: {
						nextEl: '.swiper-button-next',
						prevEl: '.swiper-button-prev',
					},
				});

				$(".menu_box").click(function(){
					var aaWidth = parseInt($(this).siblings(".menu_all_list").css("width")) + 130;
					//console.log(typeof aaWidth);

					$(".menu_all_list").fadeOut();
					$(this).siblings(".menu_all_list").fadeIn();

					$(".sidebar").animate({"width":aaWidth});
				});

				$(".swiper-button-prev, .swiper-button-next").click(function(){
					$(".sidebar").animate({"width":"130px"});
				});

			}
			
	});
	</script>
  <style>
		@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);
		@import url('https://fonts.googleapis.com/css?family=Montserrat');

    container { width: 100%; overflow: hidden; font-family: 'Montserrat', sans-serif; }
    #canvas { position: absolute; border: 0px; left: 0px; right: 0px; top: 99px; bottom: 0px; overflow: hidden; z-index: -1; display: block; }
    * { list-style: none; border-style: none; border-width: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; font-family: Montserrat, 'Noto Sans KR', Helvetica, Arial, sans-serif; margin: 0; outline: none; overflow: visible; padding: 0; }

		.header { position: fixed; z-index: 1; width: 100%; height: 99px; padding: 0 50px; background-color: #fff; /*box-shadow: 0 2px 5px rgba(0,0,0,0.1);*/ border-bottom: 1px solid #eaeaea; }
		.h_title { float: left; padding-top: 21px; }
		.h_logo { float: right; padding-top: 22px; }

		.sidebar { overflow: hidden; position: fixed; left: 50px;	top: 99px; width: 130px; height: 730px; padding-top: 40px; }
		.sidebar .swiper-container { height:650px; }
		.sidebar .swiper-slide { position: relative; }
		.sidebar .swiper-button-next, .sidebar .swiper-button-prev { display: block; position: absolute; left: 0; height: 40px; width: 130px; line-height: 40px; background-color: #888; text-align: center; color: #fff; font-size: 20px; }
		.sidebar .swiper-button-next:hover, .sidebar .swiper-button-prev:hover { background-color: #555; }
		.sidebar .swiper-button-next { top: 690px; }
		.sidebar .swiper-button-prev { top: 0; }
		.m_sidebar { display: none; }
		.menu_box { position: relative; width: 130px; height: 130px; padding: 15px; background: #fff url("img/btn_menubg.gif") no-repeat 18px 50%;  text-align: center; border-top: 1px dashed #b1b1b1; }
		.menu_box.sel { background-image: url("img/btn_menubg_sel.png");}
			.menu_title { height: 30px; padding-top: 2px; color: #fff; font-size: 17px; }
			.menu_sel_text { position: relative; width: 77px; height: 64px; margin: 0 auto; line-height: 72px; font-size: 19px; }
				.menu_sel_text>img { position: absolute; left: 0; top: 13px; width: 77px; height: 44px; }
				.menu_sel_text>span { display: block; position: absolute; left: 0; top: 13px; width: 77px; height: 44px; line-height: 46px; }
		
		.menu_all_list { display: none; position: absolute; left: 122px; top: 18px;  height: 94px; background-color: #fff; border: 1px solid #eaeaea;  }
			.mal_buttons>div { overflow: hidden; float:left; position: relative; width: 100px; height: 92px; background-color: #fff; text-align: center; line-height: 98px; font-size: 18px; cursor: pointer; color: #888; font-weight: 500;}
				.mal_buttons>div>img { width: 100px; height: 92px; }
				.mal_buttons>div>span { position: absolute; left: 0; top: 0; display: block; width: 100%; height: 100%; text-align: center; color: #aaa;}
			.mal_buttons>div.sel,
			.mal_buttons>div:hover { border: 4px solid #ed9c00; line-height: 90px; color: #aaa; }
			.mal_buttons>div.sel>img,
			.mal_buttons>div:hover>img { width: 92px; height: 84px; }
			.mal_buttons>div:hover>span { color: #888; }

		.footer { position: fixed; left: 0; bottom: 0; width: 100%; height: 130px; padding:20px 0; background-color: rgba(0, 0, 0, 0.7);}
				.ft_inner>div { float: left; height: 95px; padding: 20px 40px 0; border-left: 1px solid rgba(255, 255, 255, 0.1);}

					.ft_title { font-weight: normal; color: #9f9f9f; font-size: 16px; }
					.ft_prd_code { color: #fff; font-size: 30px; letter-spacing: -0.5px; }

					.delivery_box { float: left; }
					.delivery_box:first-child { margin-right: 20px; }
						.delivery_info { position: relative; width: 175px; height: 35px; line-height: 35px; background-color: #000; overflow: hidden; color: #fff; text-indent: 10px; font-size: 18px; margin-top: 5px; }
						.delivery_info.price { text-align: right; padding-right: 10px; }
							.delivery_area_list { height: 35px; }
								.delivery_area_list>li { line-height: 35px; list-style: none; }
							.delivery_list_more { position: absolute; right: 10px; top: 0; }

							.delivery_info.price>span { font-size: 14px; }

						.ft_total_title { display: block; float: left; line-height: 110px; font-size: 24px; color: #fff; font-weight: normal; }
						.ft_total_price { display: block; float: right; line-height: 110px; font-size: 50px; color: #fff;  }
							.ft_total_price>span { padding-left: 5px; font-size: 20px; }
  
		@media (max-width:1024px) {
			/*.sidebar { display: none; }*/
			.sidebar,
			.m_sidebar {display: block; overflow: hidden; position: fixed; left: 50%; top: 100px; width: 840px; height: 130px; padding: 0; margin-left: -420px; box-sizing: border-box; background-color: #fff; }
			.sidebar .swiper-container { position: static; width: 720px;; height: 100%; }
			.sidebar .swiper-wrapper { position: static; height: 100%; }
			.swiper-slide { position: static !important; }
			.swiper-slide:first-child { border-left: 0; }

			.sidebar .swiper-button-next, .sidebar .swiper-button-prev { display: block; position: absolute; top: 0; width: 60px; height: 180px; line-height: 180px; background-color: #888; text-align: center; color: #fff; background-image: none; margin-top: 0; }
			.sidebar .swiper-button-next:hover, .sidebar .swiper-button-prev:hover { background-color: #555; }
			.sidebar .swiper-button-next { left: 780px !important; }
			.sidebar .swiper-button-prev { left: 0; }

			.menu_box { width: 180px; height: 180px; border-top: 0; background-image: url("img/btn_menubg_m.gif"); background-size: 144px auto; background-position: center;  padding: 12px 17px;}
			.menu_box.sel { background-image: url("img/btn_menubg_sel_m.png");}

			.menu_all_list { display: none; position: absolute; z-index: 100; left: 50%; top: 130px; width: 100%;}
			.menu_sel_text { width: 120px; height: 68px; line-height: 68px; font-size: 24px; text-align: center; margin: 14px 0 0 14px; }
			.menu_sel_text>img { width: 100%; height: 100%; position: static; }
			.menu_sel_text>span { line-height: 3.2; width: 100%; height: 100%; top: 0;}
			.menu_title { height: 62px; line-height: 54px; font-size: 22px;}

			.m_sidebar { top: 270px; height: 130px; z-index: 10; background: none; }
			.m_sidebar .menu_all_list { display: none; top: 0; }
		
			
			.footer { height: 220px; }
			.ft_inner>div { height: 175px; }
			.delivery_box { margin-bottom: 10px; }
			.ft_total_price { position: relative; top: -50px; }
		}
	</style>
</head>

<body>
  <div class="container">
    <div class="header">
			<div class="h_title"><img src="img/configurator.jpg"></div>
			<div class="h_logo"><img src="img/logo.png"></div>
		</div>
		<div class="sidebar">
			<div class="swiper-container">
				<div class="swiper-wrapper">
					<div class="swiper-slide">
						<div class="menu_box sel" style=" border-top: 0;">
							<p class="menu_sel_text">기본형</p>
							<div class="menu_title">스타일</div>
						</div>
						<div class="menu_all_list" style="width: 202px;">
							<div class="mal_buttons">
								<div onclick="setMium(0)">기본형</div>
								<div onclick="setMium(1)">ㅁ다리</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">1200</p>
							<div class="menu_title">폭(W)</div>
						</div>
						<div class="menu_all_list" style="width: 502px;">
							<div class="mal_buttons">
								<div onclick="setWidth(1200)">1200</div>
								<div onclick="setWidth(1400)">1400</div>
								<div onclick="setWidth(1600)">1600</div>
								<div onclick="setWidth(1800)">1800</div>
								<div onclick="setWidth(2060)">2060</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">500</p>
							<div class="menu_title">깊이(D)</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setDepth(500)">500</div>
								<div onclick="setDepth(600)">600</div>
								<div onclick="setDepth(700)">700</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title">수직부재</div>
						</div>
						<div class="menu_all_list" style="width: 402px;">
							<div class="mal_buttons">
								<div onclick="setVertical(0)">없음</div>
								<div onclick="setVertical(1)">640</div>
								<div onclick="setVertical(2)">920</div>
								<div onclick="setVertical(3)">1860</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">1</p>
							<div class="menu_title">선반갯수</div>
						</div>
						<div class="menu_all_list" style="width: 702px;">
							<div class="mal_buttons">
								<div onclick="setShelfNum(1)">1</div>
								<div onclick="setShelfNum(2)">2</div>
								<div onclick="setShelfNum(3)">3</div>
								<div onclick="setShelfNum(4)">4</div>
								<div onclick="setShelfNum(5)">5</div>
								<div onclick="setShelfNum(6)">6</div>
								<div onclick="setShelfNum(7)">7</div>
							</div>
						</div>
          </div>
          <div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">바깥쪽</p>
							<div class="menu_title">선반방향</div>
						</div>
						<div class="menu_all_list" style="width: 202px;">
							<div class="mal_buttons">
								<div onclick="setShelfDirection(0)">바깥쪽</div>
								<div onclick="setShelfDirection(1)">안쪽</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">화이트</p>
							<div class="menu_title">상판색상</div>
						</div>
						<div class="menu_all_list" style="width: 702px;">
							<div class="mal_buttons">
								<div onclick="setBoardColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setBoardColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setBoardColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setBoardColor(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
								<div onclick="setBoardColor(5)"><img src="texture/pine.jpg"><span>파인</span></div>
								<div onclick="setBoardColor(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
								<div onclick="setBoardColor(7)"><img src="texture/redpine.jpg"><span>레드파인</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">화이트</p>
							<div class="menu_title" >프레임색상</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setFrameColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setFrameColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setFrameColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">화이트</p>
							<div class="menu_title line2" style="margin-top: -8px; line-height: 1.2;">수직프레임<br>색상</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setVerticalColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setVerticalColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setVerticalColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">화이트</p>
							<div class="menu_title">선반색상</div>
						</div>
						<div class="menu_all_list" style="width: 702px;">
							<div class="mal_buttons">
								<div onclick="setShelfBoardColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setShelfBoardColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setShelfBoardColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setShelfBoardColor(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
                <div onclick="setShelfBoardColor(5)"><img src="texture/pine.jpg"><span>파인</span></div>
                <div onclick="setShelfBoardColor(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
								<div onclick="setShelfBoardColor(7)"><img src="texture/redpine.jpg"><span>레드파인</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">화이트</p>
							<div class="menu_title line2" style="margin-top: -8px; line-height: 1.2;">선반프레임<br>색상</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setShelfFrameColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setShelfFrameColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setShelfFrameColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title">ㄱ자 모듈</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setGiyeok(0)">없음</div>
								<div onclick="setGiyeok(1)">왼쪽</div>
								<div onclick="setGiyeok(2)">오른쪽</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title">데스크매트</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setDeskMat(0)">없음</div>
								<div onclick="setDeskMat(1)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setDeskMat(2)"><img src="texture/black.jpg"><span>블랙</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title">미니서랍</div>
						</div>
						<div class="menu_all_list" style="width: 302px;">
							<div class="mal_buttons">
								<div onclick="setDrawerColor(0)">없음</div>
								<div onclick="setDrawerColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setDrawerColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title">하부가림판</div>
						</div>
						<div class="menu_all_list" style="width: 702px;">
							<div class="mal_buttons">
								<div onclick="setFence(0)">없음</div>
								<div onclick="setFence(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setFence(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setFence(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setFence(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
								<div onclick="setFence(5)"><img src="texture/pine.jpg"><span>파인</span></div>
								<div onclick="setFence(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title line2" style="margin-top: -8px; line-height: 1.2;">이동서랍<br>2단</div>
						</div>
						<div class="menu_all_list" style="width: 502px;">
							<div class="mal_buttons">
								<div onclick="setMoving2(0)">없음</div>
								<div onclick="setMoving2(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setMoving2(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setMoving2(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setMoving2(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">없음</p>
							<div class="menu_title line2" style="margin-top: -8px; line-height: 1.2;">이동서랍<br>3단</div>
						</div>
						<div class="menu_all_list" style="width: 502px;">
							<div class="mal_buttons">
								<div onclick="setMoving3(0)">없음</div>
								<div onclick="setMoving3(1)"><img src="texture/white.jpg"><span>화이트</span></div>
								<div onclick="setMoving3(2)"><img src="texture/black.jpg"><span>블랙</span></div>
								<div onclick="setMoving3(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
								<div onclick="setMoving3(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">1</p>
							<div class="menu_title">책상 배열</div>
						</div>
						<div class="menu_all_list" style="width: 402px;">
							<div class="mal_buttons">
								<div onclick="setDeskArray(1)">1</div>
								<div onclick="setDeskArray(2)">2</div>
								<div onclick="setDeskArray(3)">3</div>
								<div onclick="setDeskArray(4)">4</div>
							</div>
						</div>
					</div>
					<div class="swiper-slide">
						<div class="menu_box">
							<p class="menu_sel_text">No</p>
							<div class="menu_title line2" style="margin-top: -8px; line-height: 1.2;">책상<br>맞은편 배열</div>
						</div>
						<div class="menu_all_list" style="width: 202px;">
							<div class="mal_buttons">
								<div onclick="setDeskOpposite(false)">No</div>
								<div onclick="setDeskOpposite(true)">Yes</div>
							</div>
						</div>
          </div>
          <div class="swiper-slide">
						<div class="menu_box">
                <p class="menu_sel_text">Export</p>
							<div class="menu_title">3D 파일</div>
						</div>
						<div class="menu_all_list" style="width: 202px;">
							<div class="mal_buttons">
								<div onclick="exportOBJ()">OBJ</div>
								<div onclick="exportSTL()">STL</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Add Arrows -->
				<div class="swiper-button-next">Next</div>
				<div class="swiper-button-prev">Prev</div>
			</div>
		</div>
		<div class="m_sidebar">
			<div class="menu_all_list" style="width: 202px; margin-left: -101px; ">
				<div class="mal_buttons">
					<div onclick="setMium(0)">기본형</div>
					<div onclick="setMium(1)">ㅁ다리</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 502px; margin-left: -251px; ">
				<div class="mal_buttons">
					<div onclick="setWidth(1200)">1200</div>
					<div onclick="setWidth(1400)">1400</div>
					<div onclick="setWidth(1600)">1600</div>
					<div onclick="setWidth(1800)">1800</div>
					<div onclick="setWidth(2060)">2060</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px; ">
				<div class="mal_buttons">
					<div onclick="setDepth(500)">500</div>
					<div onclick="setDepth(600)">600</div>
					<div onclick="setDepth(700)">700</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 402px;  margin-left: -201px; ">
				<div class="mal_buttons">
					<div onclick="setVertical(0)">없음</div>
					<div onclick="setVertical(1)">640</div>
					<div onclick="setVertical(2)">920</div>
					<div onclick="setVertical(3)">1860</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 702px; margin-left: -351px; ">
				<div class="mal_buttons">
					<div onclick="setShelfNum(1)">1</div>
					<div onclick="setShelfNum(2)">2</div>
					<div onclick="setShelfNum(3)">3</div>
					<div onclick="setShelfNum(4)">4</div>
					<div onclick="setShelfNum(5)">5</div>
					<div onclick="setShelfNum(6)">6</div>
					<div onclick="setShelfNum(7)">7</div>
				</div>
      </div>
      <div class="menu_all_list" style="width: 202px; margin-left: -101px; ">
				<div class="mal_buttons">
					<div onclick="setShelfDirection(0)">바깥쪽</div>
          <div onclick="setShelfDirection(1)">안쪽</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 702px; margin-left: -351px; ">
				<div class="mal_buttons">
					<div onclick="setBoardColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setBoardColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setBoardColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setBoardColor(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
					<div onclick="setBoardColor(5)"><img src="texture/pine.jpg"><span>파인</span></div>
					<div onclick="setBoardColor(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
					<div onclick="setBoardColor(7)"><img src="texture/redpine.jpg"><span>레드파인</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px; ">
				<div class="mal_buttons">
					<div onclick="setFrameColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setFrameColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setFrameColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px; ">
				<div class="mal_buttons">
					<div onclick="setVerticalColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setVerticalColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setVerticalColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 702px; margin-left: -351px; ">
				<div class="mal_buttons">
					<div onclick="setShelfBoardColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setShelfBoardColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setShelfBoardColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setShelfBoardColor(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
          <div onclick="setShelfBoardColor(5)"><img src="texture/pine.jpg"><span>파인</span></div>
          <div onclick="setShelfBoardColor(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
					<div onclick="setShelfBoardColor(7)"><img src="texture/redpine.jpg"><span>레드파인</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px; ">
				<div class="mal_buttons">
					<div onclick="setShelfFrameColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setShelfFrameColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setShelfFrameColor(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px;">
				<div class="mal_buttons">
					<div onclick="setGiyeok(0)">없음</div>
					<div onclick="setGiyeok(1)">왼쪽</div>
					<div onclick="setGiyeok(2)">오른쪽</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px; ">
				<div class="mal_buttons">
					<div onclick="setDeskMat(0)">없음</div>
					<div onclick="setDeskMat(1)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setDeskMat(2)"><img src="texture/black.jpg"><span>블랙</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 302px; margin-left: -151px;">
				<div class="mal_buttons">
					<div onclick="setDrawerColor(0)">없음</div>
					<div onclick="setDrawerColor(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setDrawerColor(2)"><img src="texture/black.jpg"><span>블랙</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 702px; margin-left: -351px; ">
				<div class="mal_buttons">
					<div onclick="setFence(0)">없음</div>
					<div onclick="setFence(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setFence(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setFence(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setFence(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
					<div onclick="setFence(5)"><img src="texture/pine.jpg"><span>파인</span></div>
					<div onclick="setFence(6)"><img src="texture/concrete.jpg"><span>콘크리트</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 502px; margin-left: -251px; ">
				<div class="mal_buttons">
					<div onclick="setMoving2(0)">없음</div>
					<div onclick="setMoving2(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setMoving2(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setMoving2(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setMoving2(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 502px; margin-left: -251px; ">
				<div class="mal_buttons">
					<div onclick="setMoving3(0)">없음</div>
					<div onclick="setMoving3(1)"><img src="texture/white.jpg"><span>화이트</span></div>
					<div onclick="setMoving3(2)"><img src="texture/black.jpg"><span>블랙</span></div>
					<div onclick="setMoving3(3)"><img src="texture/gray.jpg"><span>그레이</span></div>
					<div onclick="setMoving3(4)"><img src="texture/natural.jpg"><span>내추럴</span></div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 402px; margin-left: -201px;">
				<div class="mal_buttons">
					<div onclick="setDeskArray(1)">1</div>
					<div onclick="setDeskArray(2)">2</div>
					<div onclick="setDeskArray(3)">3</div>
					<div onclick="setDeskArray(4)">4</div>
				</div>
			</div>
			<div class="menu_all_list" style="width: 202px; margin-left: -101px;">
				<div class="mal_buttons">
					<div onclick="setDeskOpposite(false)">No</div>
					<div onclick="setDeskOpposite(true)">Yes</div>
				</div>
      </div>
      <div class="menu_all_list" style="width: 202px; margin-left: -101px;">
				<div class="mal_buttons">
					<div onclick="exportOBJ()">OBJ</div>
          <div onclick="exportSTL()">STL</div>
				</div>
			</div>
		</div>
		<div class="footer">
			<div class="ft_inner">

				<div style="width: 17.8%; border-left: 0;">
					<strong class="ft_title">상품코드</strong>
					<p class="ft_prd_code">14211-12345-00110</p>
				</div>

				<div style="width: 23.5%;">
					<div class="delivery_box">
						<strong class="ft_title">배송지역 설정</strong>
						<div class="delivery_info">
							<ul class="delivery_area_list">
								<li>서울</li>
								<li>경기</li>
							</ul>
							<span class="delivery_list_more">+</span>
						</div>
					</div>
					<div class="delivery_box">
						<strong class="ft_title">배송 가능 날짜</strong>
						<div class="delivery_info">2017년 12월 31일</div>
					</div>
				</div>

				<div style="width: 23.5%;">
					<div class="delivery_box">
						<strong class="ft_title">배송조립비</strong>
						<div class="delivery_info price">28,000 <span>원</span></div>
					</div>
					<div class="delivery_box">
						<strong class="ft_title">상품금액</strong>
						<div class="delivery_info price">283,000 <span>원</span></div>
					</div>
				</div>

				<div style="width: 35.2%; padding-top: 0;">
					<strong class="ft_total_title">총 결제금액</strong>
					<span class="ft_total_price">123,000<span>원</span></span>
				</div>

			</div>
		</div>

    <div id="canvas">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/90/three.js"></script>
    <script src="./OrbitControls.js"></script>
    <script src="./OBJExporter.js"></script>
    <script src="./STLExporter.js"></script>

    <script>
      var container;
      var camera, controls, scene, renderer;
      var geometry, geometry1, material;

      var width, height = 700;

      var white_color = 0xf8f9fb;
      var black_color = 0x21201e;
      var gray_color = 0x6f6f6f;

      var texture_natural = new THREE.TextureLoader().load('texture/natural.jpg');
      var texture_pine = new THREE.TextureLoader().load('texture/pine.jpg');
      var texture_concrete = new THREE.TextureLoader().load('texture/concrete.jpg');
      var texture_redpine = new THREE.TextureLoader().load('texture/redpine.jpg');

      texture_natural.minFilter = THREE.LinearFilter;
      texture_pine.minFilter = THREE.LinearFilter;
      texture_concrete.minFilter = THREE.LinearFilter;
      texture_redpine.minFilter = THREE.LinearFilter;

      var plane;
      var plane_size = 10000;
      var plane_material = new THREE.MeshPhongMaterial( {
					color: 0xEEEEEE,
					side: THREE.BackSide
				} );

      var is_mium = 0;
      var mium_leg;

      var num_desk = 1;
      var is_desk_duplicated = false;

      var desk;

      var board;
      var giyeok_board;
      var board_thickness = 20;
      var board_width = 1200;
      var board_width_idx = 1;
      var board_depth = 500;
      var board_depth_idx = 1;
      var board_color = 1;
      var board_material = new THREE.MeshPhongMaterial({ color: white_color });

      var frame;
      var frame_thickness = 40;
      var frame_thickness_under_board = 20;
      var frame_length = 700;
      var frame_margin = 2;       // between frame and board
      var frame_color = 1;
      var frame_material = new THREE.MeshPhongMaterial({ color: white_color });

      var vertical;
      var vertical_length_idx = 0;
      var vertical_length = 0;
      var vertical_y;
      var vertical_color = 1;
      var vertical_material = new THREE.MeshPhongMaterial({ color: white_color });

      var shelf;
      var shelf_depth = 200;
      var shelf_num = 0;
      var shelf_direction = 0; // out - 0, in - 1
      var shelf_board_color = 1;
      var shelf_frame_color = 1;
      var shelf_board_material = new THREE.MeshPhongMaterial({ color: white_color });
      var shelf_frame_material = new THREE.MeshPhongMaterial({ color: white_color });

      var leg_pad;
      var leg_pad_meterial = new THREE.MeshPhongMaterial({ color: white_color });

      var giyeok_position = 0;

      var desk_mat_color = 0;
      var desk_mat;
      var desk_mat_material;

      var drawer_position = 0;
      var drawer_color = 0;
      var drawer_up;
      var drawer_down;
      var drawer_material = getMaterial(drawer_color);

      var fence_color = 0;
      var fence;
      var fence_material = new THREE.MeshPhongMaterial({ color: white_color });

      var moving2_color = 0;
      var moving2_position = 1;
      var moving2;
      var moving2_material = new THREE.MeshPhongMaterial({ color: white_color });
      var drawer1, drawer2, drawer3;
      var wheel;

      var moving3_color = 0;
      var moving3_position = 1;
      var moving3;
      var moving3_material = new THREE.MeshPhongMaterial({ color: white_color });

      var link = document.createElement( 'a' );
			link.style.display = 'none';
			document.body.appendChild( link );

      init();
      animate();

      function init() {
        container = document.getElementById('canvas');
        width = window.innerWidth;
        height = window.innerHeight;

        camera = new THREE.PerspectiveCamera(20, width / height, 100, 50000);
        camera.position.x = 1000;
        camera.position.y = 1500;
        camera.position.z = 5000;

        updateScene();

        // renderer
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.shadowMap.enabled = true;
        renderer.setClearColor(white_color);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(width, height);

        container.appendChild(renderer.domElement);

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.autoRotate = true;
        controls.autoRotateSpeed *= 2.0;
        controls.rotateSpeed = 5.0;
        controls.zoomSpeed = 1.2;
        controls.panSpeed = 1.8;
        controls.target = new THREE.Vector3(0, 500, 0);

        controls.addEventListener('change', render);

        window.addEventListener('resize', onWindowResize, false);

        render();
      }

      function setMium(m) {
        is_mium = m;

        if (checkCollision()) {
          is_mium = 0;
          return;
        }

        updateScene();
        render();
      }

      function setWidth(w) {
        var prev = board_width;

        board_width = w;
        if (checkCollision()) {
          board_width = prev;
          return;
        }

        switch (board_width) {
        case 1200:
          board_width_idx = 1;
          break;
        case 1400:
          board_width_idx = 2;
          break;
        case 1600:
          board_width_idx = 3;
          break;
        case 1800:
          board_width_idx = 4;
          break;
        case 2060:
          board_width_idx = 5;
          break;
        default:
          board_width_idx = 0;
        }

        updateScene();
        render();
      }

      function setDepth(d) {
        var prev = board_depth;

        board_depth = d;
        if (checkCollision()) {
          board_depth = prev;
          return;
        }

        switch (board_depth) {
        case 500:
          board_depth_idx = 1;
          break;
        case 600:
          board_depth_idx = 2;
          break;
        case 700:
          board_depth_idx = 3;
          break;
        default:
          board_depth_idx = 9;
        }

        updateScene();
        render();
      }

      function getMaterial(color_code) {
        var material;

        switch (color_code) {
          case 1:
            material = new THREE.MeshPhongMaterial({ color: white_color });
            return material;
          case 2:
            material = new THREE.MeshPhongMaterial({ color: black_color });
            return material;
          case 3:
            material = new THREE.MeshPhongMaterial({ color: gray_color });
            return material;
          case 4:
            material = new THREE.MeshPhongMaterial({ map: texture_natural });
            return material;
          case 5:
            material = new THREE.MeshPhongMaterial({ map: texture_pine });
            return material;
          case 6:
            material = new THREE.MeshPhongMaterial({ map: texture_concrete });
            return material;
          case 7:
            material = new THREE.MeshPhongMaterial({ map: texture_redpine });
            return material;
          default:
            material = new THREE.MeshPhongMaterial({ color: white_color });
            return material;
        }
      }

      function setBoardColor(c) {
        board_color = c;
        board_material = getMaterial(c);
        updateScene();
        render();
      }

      function setFrameColor(c) {
        frame_color = c;
        frame_material = getMaterial(c);

        if (c == 1)
          leg_pad_meterial = new THREE.MeshPhongMaterial({ color: white_color });
        else
          leg_pad_meterial = new THREE.MeshPhongMaterial({ color: black_color });

        updateScene();
        render();
      }

      function setVerticalColor(c) {
        vertical_color = c;
        vertical_material = getMaterial(c);
        updateScene();
        render();
      }

      function setShelfBoardColor(c) {
        shelf_board_color = c;
        shelf_board_material = getMaterial(c);
        updateScene();
        render();
      }

      function setShelfFrameColor(c) {
        shelf_frame_color = c;
        shelf_frame_material = getMaterial(c);
        updateScene();
        render();
      }

      function setVertical(c) {
        vertical_length_idx = c;

        switch (c) {
          case 0:
            vertical_length = 0;
            shelf_num = 0;
            break;
          case 1:
            vertical_length = 640;
            vertical_y = -30;
            break;
          case 2:
            vertical_length = 920;
            vertical_y = -30;
            break;
          case 3:
            vertical_length = 1860;
            vertical_y = 360;
            break;
          default:
            vertical_length = 0;
            shelf_num = 0;
            break;
        }

        adjustShlefNum();

        updateScene();
        render();
      }

      function setShelfNum(n) {
        shelf_num = n;
        adjustShlefNum();

        updateScene();
        render();
      }

      function setShelfDirection(d) {
        shelf_direction = d;
        adjustShlefNum();

        updateScene();
        render();
      }

      function setGiyeok(d) {
        var prev = giyeok_position;

        giyeok_position = d;
        if (checkCollision()) {
          giyeok_position = prev;
          return;
        }

        updateScene();
        render();
      }

      function setDeskMat(c) {
        var prev = desk_mat_color;

        desk_mat_color = c;
        if (checkCollision()) {
          desk_mat_color = prev;
          return;
        }

        switch (desk_mat_color) {
        case 0:
          break;
        case 1:
          desk_mat_material = getMaterial(3);
          break;
        case 2:
          desk_mat_material = getMaterial(2);
          break;
        }
        updateScene();
        render();
      }

      function setDrawerColor(c) {
        drawer_color = c;
        if (drawer_color) {
          if (giyeok_position == 1)
            drawer_position = 2;
          else
            drawer_position = 1;

          if (checkCollision()) {
            drawer_color = 0;
            return;
          }

          drawer_material = getMaterial(c);
        }
        
        updateScene();
        render();
      }

      function setFence(c) {
        fence_color = c;
        if (fence_color)
          fence_material = getMaterial(c);

        updateScene();
        render();
      }

      function setMoving2(c) {
        moving2_color = c;
        if (moving2_color) {
          if (moving3_color && moving3_position == 1)
            moving2_position = 2;
          else
            moving2_position = 1;

          moving2_material = getMaterial(c);
        }

        updateScene();
        render();
      }

      function setMoving3(c) {
        moving3_color = c;

        if (checkCollision()) {
          moving3_color = 0;
          return;
        }

        if (moving3_color) {
          if (moving2_color && moving2_position == 1)
            moving3_position = 2;
          else
            moving3_position = 1;

          moving3_material = getMaterial(c);
        }

        updateScene();
        render();
      }

      function setDeskArray(n) {
        num_desk = n;

        updateScene();
        render();
      }

      function setDeskOpposite(b) {
        is_desk_duplicated = b;

        updateScene();
        render();
      }

      function checkCollision() {
        if (giyeok_position && drawer_color && (giyeok_position == drawer_position)) {
          alert("ㄱ자 모듈과 미니서랍이 겹칩니다.");
          return true;
        }

        if (giyeok_position && desk_mat_color && (board_width < 2000)) {
          alert("데스크매트와 ㄱ자 모듈이 겹칩니다.");
          return true;
        }

        if (desk_mat_color && drawer_color && (board_width < 1500)) {
          alert("데스크매트와 미니서랍이 겹칩니다.");
          return true;
        }

        if (fence_color && moving3_color) {
          alert("하부가림막과 3단 서랍이 겹칩니다.");
          return true;
        }

        if (board_depth != 600 && is_mium) {
          alert("ㅁ다리는 상판깊이가 600일 때만 가능합니다.");
          return true;
        }

        return false;
      }

      function adjustShlefNum() {
        var max_shelf_num = 0;

        switch (vertical_length) {
          case 0:
            shelf_num = 0;
            return;
          case 640:
            max_shelf_num = 3;
            break;
          case 920:
            max_shelf_num = 5;
            break;
          case 1860:
            max_shelf_num = 7;
            break;
          default:
            max_shelf_num = 0;
            break;
        }

        if (max_shelf_num < shelf_num)
          shelf_num = max_shelf_num;

        if ((vertical_length > 0) && (shelf_num == 0))
          shelf_num = 1;
      }

      function generateProductCode() {
        var ret;
        var sub_str;

        if (is_mium)
          ret = "2";
        else
          ret = "1";
        
        sub_str = board_width_idx.toString();
        ret += sub_str;

        sub_str = board_depth_idx.toString();
        ret += sub_str;

        sub_str = vertical_length_idx.toString();
        ret += sub_str;

        if (vertical_length) {
          sub_str = shelf_num.toString();
          ret += sub_str;
        }
        else
          ret += "0";

        // delimiter
        ret += "-";

        if (shelf_direction)
          ret += "2";
        else
          ret += "1";
          
        sub_str = board_color.toString();
        ret += sub_str;

        sub_str = frame_color.toString();
        ret += sub_str;

        sub_str = vertical_color.toString();
        ret += sub_str;

        sub_str = shelf_board_color.toString();
        ret += sub_str;

        // delimiter
        ret += "-";

        sub_str = shelf_frame_color.toString();
        ret += sub_str;

        sub_str = giyeok_position.toString();
        ret += sub_str;

        sub_str = desk_mat_color.toString();
        ret += sub_str;

        sub_str = drawer_color.toString();
        ret += sub_str;

        sub_str = fence_color.toString();
        ret += sub_str;

        // delimiter
        ret += "-";

        sub_str = moving2_color.toString();
        ret += sub_str;

        sub_str = moving3_color.toString();
        ret += sub_str;

        sub_str = num_desk.toString();
        ret += sub_str;

        if (is_desk_duplicated)
          ret += "2";
        else
        ret += "1";

        return ret;
      }

      function calculatePrice() {
        var delivery_price = 0;
        var product_price = 0;
        var ret_price = new Array(2);

        var board_price_table = [ 117300,	134200,	142600,	155800,	193100,
                                  128300,	146800,	164800,	186900,	214500,
                                  162800,	189500,	199700,	217300,	241400];
        var shelf_product_price_table = [34000,	43000,	45000,	51000,	57000];
        var shelf_delivery_price_table = [29800, 29800, 32800, 35800, 38800, 41800, 44800];
        var fence_price_table = [81700, 101700, 103400, 105000, 113900];

        var table_index = (board_width_idx - 1) + (board_depth_idx - 1) * 5; 
        product_price += board_price_table[table_index];
        delivery_price += 29800;

        if (is_mium) {
          product_price += 69900;
          delivery_price += 29800;
        }

        if (vertical_length_idx) {
          product_price += shelf_product_price_table[board_width_idx - 1] * shelf_num;
          delivery_price += shelf_delivery_price_table[shelf_num - 1];

          if (vertical_length_idx == 2)
            product_price += 11400;
          else if (vertical_length_idx == 3)
            product_price += 21900;
        }

        if (giyeok_position)
          product_price += 94500;

        if (desk_mat_color) {
          product_price += 65000;
          delivery_price += 5000;
        }

        if (drawer_color) {
          product_price += 34400;
          delivery_price += 3000;
        }

        if (fence_color) {
          product_price += fence_price_table[board_width_idx - 1];
          delivery_price += 19800;
        }

        if (moving2_color) {
          product_price += 88000;
          delivery_price += 19800;
        }

        if (moving3_color) {
          product_price += 121000;
          delivery_price += 19800;
        }

        if (num_desk > 1) {
          product_price *= num_desk;
          delivery_price *= num_desk;
        }

        if (is_desk_duplicated) {
          product_price *= 2;
          delivery_price *= 2;
        }
        
        // return
        ret_price[0] = delivery_price;
        ret_price[1] = product_price;

        return ret_price;
      }

      function updateScene() {
        // world
        scene = new THREE.Scene();

        // plane
        geometry = new THREE.PlaneGeometry(plane_size, plane_size);
        plane = new THREE.Mesh(geometry, plane_material);
        plane.rotation.x = 0.5 * Math.PI;
        plane.receiveShadow = true;
        scene.add(plane);

        // desk (empty parent)
        geometry = new THREE.BoxBufferGeometry(0, 0, 0);
        desk = new THREE.Mesh(geometry, board_material);

        // board
        geometry = new THREE.BoxBufferGeometry(board_width, board_thickness, board_depth);
        board = new THREE.Mesh(geometry, board_material);
        board.position.y = frame_length + board_thickness;
        board.castShadow = true;
        desk.add(board);

        // desk mat
        if (desk_mat_color) {
          geometry = new THREE.BoxBufferGeometry(700, board_thickness, 420);
          desk_mat = new THREE.Mesh(geometry, desk_mat_material);
          desk_mat.position.y = 2;
          desk_mat.position.z = (board_depth - 420) / 2 + 2;
          board.add(desk_mat);
        }

        // drawer
        if (drawer_color) {
          geometry = new THREE.BoxBufferGeometry(309, 30, 150);
          drawer_down = new THREE.Mesh(geometry, drawer_material);
          if (drawer_position == 1)
            drawer_down.position.x = -(board_width - 309 - 90) / 2;
          else
            drawer_down.position.x = (board_width - 309 - 90) / 2;
          drawer_down.position.y = -32;
          drawer_down.position.z = (board_depth - 150) / 2 + 2;
          board.add(drawer_down);

          geometry1 = new THREE.BoxBufferGeometry(309, 25, 40);
          drawer_up = new THREE.Mesh(geometry1, drawer_material);
          drawer_up.position.y = 32;
          drawer_up.position.z = 56;
          drawer_down.add(drawer_up);
        }

        // moving2
        if (moving2_color) {
          geometry = new THREE.BoxBufferGeometry(300, 585, 400);
          moving2 = new THREE.Mesh(geometry, moving2_material);
          if (moving2_position == 1)
            moving2.position.x = - (board_width - 400 ) / 2;
          else
            moving2.position.x = (board_width - 400 ) / 2;
          moving2.position.y = - frame_length + (585 + 50) / 2;
          moving2.position.z = (board_depth - 450 )/ 2;
          moving2.castShadow = true;
          board.add(moving2);

          // drawer 1 and 2
          geometry = new THREE.BoxBufferGeometry(300, 275, 20);
          drawer1 = new THREE.Mesh(geometry, moving2_material);
          drawer1.position.y = (585 - 275) / 2;
          drawer1.position.z = 220;
          moving2.add(drawer1);

          drawer2 = new THREE.Mesh(geometry, moving2_material);
          drawer2.position.y = -(585 - 275) / 2;
          drawer2.position.z = 220;
          moving2.add(drawer2);

          // wheel
          geometry = new THREE.CylinderBufferGeometry(25, 25, 30);
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( -130, -320, 180 );
          wheel.rotation.x = Math.PI / 2;          
          moving2.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( 130, -320, 180 );
          wheel.rotation.x = Math.PI / 2;          
          moving2.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( -130, -320, -180 );
          wheel.rotation.x = Math.PI / 2;          
          moving2.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( 130, -320, -180 );
          wheel.rotation.x = Math.PI / 2;          
          moving2.add(wheel);
        }

        // moving3
        if (moving3_color) {
          geometry = new THREE.BoxBufferGeometry(400, 585, 580);
          moving3 = new THREE.Mesh(geometry, moving3_material);
          if (moving3_position == 1)
            moving3.position.x = - (board_width - 500 ) / 2;
          else
            moving3.position.x = (board_width - 500 ) / 2;
          moving3.position.y = - frame_length + (585 + 50) / 2;
          moving3.position.z = (board_depth - 640 )/ 2;
          moving3.castShadow = true;
          board.add(moving3);

          // drawer 1, 2, 3
          geometry = new THREE.BoxBufferGeometry(400, 190, 20);
          drawer1 = new THREE.Mesh(geometry, moving3_material);
          drawer1.position.y = (585 - 190) / 2;
          drawer1.position.z = 310;
          moving3.add(drawer1);

          drawer2 = new THREE.Mesh(geometry, moving3_material);
          drawer2.position.y = 0;
          drawer2.position.z = 310;
          moving3.add(drawer2);

          drawer3 = new THREE.Mesh(geometry, moving3_material);
          drawer3.position.y = - (585 - 190) / 2;
          drawer3.position.z = 310;
          moving3.add(drawer3);

          // wheel
          geometry = new THREE.CylinderBufferGeometry(25, 25, 30);
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( -180, -320, 280 );
          wheel.rotation.x = Math.PI / 2;          
          moving3.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( 180, -320, 280 );
          wheel.rotation.x = Math.PI / 2;          
          moving3.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( -180, -320, -280 );
          wheel.rotation.x = Math.PI / 2;          
          moving3.add(wheel);

          // wheel
          wheel = new THREE.Mesh(geometry, leg_pad_meterial);
          wheel.position.set( 180, -320, -280 );
          wheel.rotation.x = Math.PI / 2;          
          moving3.add(wheel);
        }

        // frame (leg)
        geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_length, frame_thickness);
        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = - (board_width - frame_thickness) / 2;
        frame.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
        frame.position.z = - (board_depth - frame_thickness) / 2;
        frame.castShadow = true;
        board.add(frame);

        // leg pad
        geometry1 = new THREE.CylinderBufferGeometry(frame_thickness / 1.8, frame_thickness / 1.8, 10);
        leg_pad = new THREE.Mesh(geometry1, leg_pad_meterial);
        leg_pad.position.y = - frame_length / 2 - 8;
        frame.add(leg_pad);

        var frame_dup = frame.clone();
        frame_dup.position.x = (board_width - frame_thickness) / 2;
        frame_dup.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
        frame_dup.position.z = - (board_depth - frame_thickness) / 2;
        frame_dup.castShadow = true;
        board.add(frame_dup);

        frame_dup = frame.clone();
        frame_dup.position.x = - (board_width - frame_thickness) / 2;
        frame_dup.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
        frame_dup.position.z = (board_depth - frame_thickness) / 2;
        frame_dup.castShadow = true;
        board.add(frame_dup);

        frame_dup = frame.clone();
        frame_dup.position.x = (board_width - frame_thickness) / 2;
        frame_dup.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
        frame_dup.position.z = (board_depth - frame_thickness) / 2;
        frame_dup.castShadow = true;
        board.add(frame_dup);

        // frame under board
        geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_thickness, board_depth);
        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = (board_width - frame_thickness) / 2;
        frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
        board.add(frame);

        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.x = - (board_width - frame_thickness) / 2;
        frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
        board.add(frame);

        // mium leg
        if (is_mium) {
          geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_thickness, board_depth);
          mium_leg = new THREE.Mesh(geometry, frame_material);
          mium_leg.position.x = (board_width - frame_thickness) / 2;
          mium_leg.position.y = - frame_length + (frame_thickness - board_thickness) / 2 - frame_margin;
          mium_leg.castShadow = true;
          board.add(mium_leg);

          mium_leg = new THREE.Mesh(geometry, frame_material);
          mium_leg.position.x = - (board_width - frame_thickness) / 2;
          mium_leg.position.y = - frame_length + (frame_thickness - board_thickness) / 2 - frame_margin;
          mium_leg.castShadow = true;
          board.add(mium_leg);
        }

        // frame under board
        geometry = new THREE.BoxBufferGeometry(board_width - 2, frame_thickness, frame_thickness_under_board);
        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
        frame.position.z = board_depth / 4;
        board.add(frame);

        frame = new THREE.Mesh(geometry, frame_material);
        frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
        frame.position.z = - board_depth / 4;
        board.add(frame);

        // fence
        if (fence_color) {
          geometry = new THREE.BoxBufferGeometry(board_width - 5, 200, 18);
          fence = new THREE.Mesh(geometry, fence_material);
          fence.position.y = -100;
          fence.position.z = - frame_thickness_under_board;
          fence.castShadow = true;
          frame.add(fence);

          fence = new THREE.Mesh(geometry, fence_material);
          fence.position.y = -305;
          fence.position.z = - frame_thickness_under_board;
          fence.castShadow = true;
          frame.add(fence);
        }

        // vertical
        if (vertical_length > 0) {
          geometry = new THREE.BoxBufferGeometry(frame_thickness, vertical_length, frame_thickness);
          vertical = new THREE.Mesh(geometry, vertical_material);
          vertical.position.x = - (board_width - frame_thickness) / 2;
          vertical.position.y = vertical_y;
          vertical.position.z = - (board_depth + frame_thickness + 5) / 2;
          vertical.castShadow = true;
          board.add(vertical);

          vertical = new THREE.Mesh(geometry, vertical_material);
          vertical.position.x = + (board_width - frame_thickness) / 2;
          vertical.position.y = vertical_y;
          vertical.position.z = - (board_depth + frame_thickness + 5) / 2;
          vertical.castShadow = true;
          board.add(vertical);

          // shelves
          // shelf frame (top)
          geometry = new THREE.BoxBufferGeometry(board_width + 8, frame_thickness, frame_thickness + 2);
          frame = new THREE.Mesh(geometry, shelf_frame_material);
          frame.position.x = - (board_width - frame_thickness) / 2;
          frame.position.y = (vertical_length + frame_thickness) / 2 - board_thickness;
          frame.castShadow = true;
          vertical.add(frame);

          // shelf board (top)
          geometry = new THREE.BoxBufferGeometry(board_width - 2, board_thickness, shelf_depth);
          shelf = new THREE.Mesh(geometry, shelf_board_material);
          shelf.position.y = (frame_thickness + board_thickness) / 2;
          if (shelf_direction)
            shelf.position.z = (shelf_depth - frame_thickness + 2) / 2;
          else 
            shelf.position.z = - (shelf_depth - frame_thickness + 2) / 2;
          shelf.castShadow = true;
          frame.add(shelf);   

          // shelf duplicate
          var i;
          for (i = 1; i < shelf_num; i++) {
            var frame_dup = frame.clone();
            frame_dup.position.x = - (board_width - frame_thickness) / 2;
            if (shelf_direction)
              frame_dup.position.y = - (vertical_length / 2 + vertical_y) * (i / (shelf_num - 1)) + vertical_length / 2;
            else
              frame_dup.position.y = vertical_length * (0.5 - i / (shelf_num - 1));
            frame_dup.castShadow = true;
            vertical.add(frame_dup);
          }

          // safety leg
          geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_thickness, shelf_depth);
          frame = new THREE.Mesh(geometry, frame_material);
          frame.position.x = - (board_width - frame_thickness) / 2;
          frame.position.y = - frame_length + (frame_thickness - board_thickness) / 2;
          if (shelf_direction)
            frame.position.z = - (board_depth - shelf_depth) / 2;
          else
            frame.position.z = - (board_depth + shelf_depth) / 2;
          frame.castShadow = true;
          board.add(frame);

          // safety leg pad
          leg_pad = new THREE.Mesh(geometry1, leg_pad_meterial);
          leg_pad.position.y = - frame_thickness / 2 - 8;
          if (shelf_direction)
            leg_pad.position.z = (shelf_depth - frame_thickness) / 2;
          else
            leg_pad.position.z = - (shelf_depth - frame_thickness) / 2;
          frame.add(leg_pad);

          // safety leg duplicate
          frame_dup = frame.clone();
          frame_dup.position.x = + (board_width - frame_thickness) / 2;
          frame_dup.position.y = - frame_length + (frame_thickness - board_thickness) / 2;
          if (shelf_direction)
            frame_dup.position.z = - (board_depth - shelf_depth) / 2;
          else
            frame_dup.position.z = - (board_depth + shelf_depth) / 2;
          frame_dup.castShadow = true;
          board.add(frame_dup);
        }

        // Gieok module
        if (giyeok_position) {
          geometry = new THREE.BoxBufferGeometry(600, board_thickness, 800);
          giyeok_board = new THREE.Mesh(geometry, board_material);
          if (giyeok_position == 1)
            giyeok_board.position.x = - (board_width - 600) / 2;
          else
            giyeok_board.position.x = (board_width - 600) / 2;
          giyeok_board.position.z = (board_depth + 800) / 2;
          giyeok_board.castShadow = true;
          board.add(giyeok_board);

          // frame (leg)
          geometry = new THREE.BoxBufferGeometry(frame_thickness, frame_length, frame_thickness);
          frame = new THREE.Mesh(geometry, frame_material);
          frame.position.x = - (600 - frame_thickness) / 2;
          frame.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
          frame.position.z = (800 - frame_thickness) / 2;
          frame.castShadow = true;
          giyeok_board.add(frame);

          // leg pad
          leg_pad = new THREE.Mesh(geometry1, leg_pad_meterial);
          leg_pad.position.y = - frame_length / 2 - 8;
          frame.add(leg_pad);

          frame_dup = frame.clone();
          frame_dup.position.x = (600 - frame_thickness) / 2;
          frame_dup.position.y = - (frame_length + board_thickness) / 2 - frame_margin;
          frame_dup.position.z = (800 - frame_thickness) / 2;
          frame_dup.castShadow = true;
          giyeok_board.add(frame_dup);

          // frame under board
          geometry = new THREE.BoxBufferGeometry(600, frame_thickness, frame_thickness);
          frame = new THREE.Mesh(geometry, frame_material);          
          frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
          frame.position.z = (800 - frame_thickness) / 2;
          giyeok_board.add(frame);

          geometry = new THREE.BoxBufferGeometry(frame_thickness_under_board, frame_thickness, 800 + board_depth / 4);
          frame = new THREE.Mesh(geometry, frame_material);
          frame.position.y = - (board_thickness + frame_thickness) / 2 - frame_margin;
          frame.position.z = - board_depth / 8;
          giyeok_board.add(frame);
        }

        // desk array
        for (var i = 1; i < num_desk; i++) {
          var board_dup = board.clone();
          board_dup.position.set((board_width + 10) * i, frame_length + board_thickness, 0);
          desk.add(board_dup);    
        }

        // desk array in opposite side
        if (is_desk_duplicated) {
          for (var i = 0; i < num_desk; i++) {
            var board_dup = board.clone();
            var length_z = board_depth + 10;

            if (vertical_length > 0) {
              if (shelf_direction) // in
                length_z += frame_thickness * 2;
              else  // out
                length_z += shelf_depth * 2;
            }

            board_dup.position.set((board_width + 10) * i, frame_length + board_thickness, - length_z);
            board_dup.rotation.y = Math.PI;
            desk.add(board_dup);    
          }
        }

        // move desk array to center
        desk.position.set(-(board_width + 10) * 0.5 * (num_desk - 1), 0, 0);
        scene.add(desk);
        
        // light
        var lights = [];
        var d = 2048;
        lights[0] = new THREE.DirectionalLight(0xffffff, 0.3);
        lights[1] = new THREE.DirectionalLight(0xffffff, 0.3);
        lights[2] = new THREE.DirectionalLight(0xffffff, 0.3);
        lights[3] = new THREE.DirectionalLight(0xffffff, 0.3);
        lights[4] = new THREE.AmbientLight(0xffffff, 0.5);

        lights[0].castShadow = true;
				lights[0].shadow.camera.left = -d ;
				lights[0].shadow.camera.right = d ;
				lights[0].shadow.camera.top = d ;
				lights[0].shadow.camera.bottom = -d ;
				lights[0].shadow.camera.far = 10000;
        lights[0].position.set(-1000, 1000, 1000);

        lights[1].position.set(1000, 500, -1000);
        lights[2].position.set(-1000, 500, -1000);
        lights[3].position.set(1000, 500, 1000);

        scene.add(lights[0]);
        scene.add(lights[1]);
        scene.add(lights[2]);
        scene.add(lights[3]);
        scene.add(lights[4]);

        // Generate product code
        var productCode = document.getElementsByClassName("ft_prd_code");
        productCode[0].innerHTML = generateProductCode();        

        var price_arr = calculatePrice();
        var price = document.getElementsByClassName("delivery_info price");
        var total_price = price_arr[0] + price_arr[1];
        price[0].innerHTML = price_arr[0].toLocaleString();
        price[1].innerHTML = price_arr[1].toLocaleString();

        price = document.getElementsByClassName("ft_total_price");
        price[0].innerHTML = total_price.toLocaleString();
      }

      function onWindowResize() {
        container = document.getElementById('canvas');
        width = window.innerWidth;
        height = window.innerHeight;

        camera.aspect = width / height;
        camera.updateProjectionMatrix();

        renderer.setSize(width, height);

        render();
      }

      function animate() {
        requestAnimationFrame(animate);
        controls.update();
        render();
      }

      function render() {
        renderer.render(scene, camera);
      }
      
      function save( blob, filename ) {
				link.href = URL.createObjectURL( blob );
				link.download = filename;
				link.click();
      }
      
			function saveString( text, filename ) {
				save( new Blob( [ text ], { type: 'text/plain' } ), filename );
      }
      
			function saveArrayBuffer( buffer, filename ) {
				save( new Blob( [ buffer ], { type: 'application/octet-stream' } ), filename );
      }
      
      function exportOBJ() {
        var exporter = new THREE.OBJExporter();
        var result = exporter.parse(desk);
        saveString(result, "f1desk.obj");
      }

      function exportSTL() {
        var exporter = new THREE.STLExporter();
        var result = exporter.parse(desk);
        saveString(result, "f1desk.stl");
      }

    </script>
</body>

</html>